<ng-container *appToolbarContent>

  <mat-slide-toggle [(ngModel)]="urlBinding.values.allJobs" style="padding-right: 16px;">
    Show Inactive Jobs
  </mat-slide-toggle>
  <mat-slide-toggle [(ngModel)]="urlBinding.values.allRoles">
    Show Role History
  </mat-slide-toggle>
</ng-container>

<mat-tree [dataSource]="nodes" [treeControl]="nestedTreeControl">
  <mat-nested-tree-node *matTreeNodeDef="let node; when: isOrgNode">
    <li>
      <div class="mat-tree-node">
        <button mat-icon-button matTreeNodeToggle [style.visibility]="node.children.length ? 'visible' : 'hidden'"
                [attr.aria-label]="'toggle ' + node.value.groupName">
          <mat-icon class="mat-icon-rtl-mirror">
            {{nestedTreeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
          </mat-icon>
        </button>
        <a mat-button [routerLink]="['/groups', 'edit', node.id]">
          <mat-icon>location_city</mat-icon>
          {{node.value.groupName}}
        </a>
        <a *ngIf="node.value.supervisorPerson as person" mat-button [routerLink]="['/people', 'edit', node.id]">
          <mat-icon>person</mat-icon>
          Supervisor: {{person.preferredName}} {{person.lastName}}
        </a>
        <span>
          Jobs Total: {{jobsAvalible(node)}} Filled: {{filledJobs(node)}}
        </span>
      </div>
      <ul *ngIf="nestedTreeControl.isExpanded(node)">
        <ng-container matTreeNodeOutlet></ng-container>
      </ul>
    </li>
  </mat-nested-tree-node>

  <mat-nested-tree-node *matTreeNodeDef="let node; when: isJobNode">
    <li>
      <div class="mat-tree-node">
        <button mat-icon-button matTreeNodeToggle [style.visibility]="node.children.length ? 'visible' : 'hidden'"
                [attr.aria-label]="'toggle ' + node.value.title">
          <mat-icon class="mat-icon-rtl-mirror">
            {{nestedTreeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
          </mat-icon>
        </button>
        <a mat-button [routerLink]="['/job', 'edit', node.id]">
          <mat-icon>work</mat-icon>
          {{node.value.title}}
        </a>
        <span>Jobs Total: {{jobsAvalible(node)}} Filled: {{filledJobs(node)}}</span>
      </div>
      <ul *ngIf="nestedTreeControl.isExpanded(node)">
        <ng-container matTreeNodeOutlet></ng-container>
      </ul>
    </li>
  </mat-nested-tree-node>

  <mat-tree-node *matTreeNodeDef="let node; when: isRoleNode">
    <li class="mat-tree-node">
      <button mat-icon-button disabled></button>

      <a mat-button [routerLink]="['/people', 'edit', node.id]">
        <mat-icon>person</mat-icon>
        {{node.value.preferredName}} {{node.value.lastName}}
      </a>
      <span>{{node.value.startDate | date}} till {{node.value.active ? 'now' : (node.value.endDate | date)}}</span>
    </li>
  </mat-tree-node>
</mat-tree>
